## بهترین روش‌های احراز هویت Front-end
### 0:01
سلام و خوش آمدید به برنامه نویسی جاوا اسکریپت ایمن با ولادیمیر [نامفهوم]. در این ویدیو، در مورد کارهایی که در جلوی یک برنامه تک صفحه ای در رابطه با احراز هویت باید انجام شود، صحبت خواهیم کرد. من امروز تصمیم گرفتم به روش خاصی بروم، یعنی برنامه ای از Github به نام view authentication نمونه گرفتم، و گزینه های احراز هویت و مکانیسم های استفاده شده توسط نویسنده را بررسی می کنیم و ببینیم که آیا می خواهیم آنها را حفظ کنیم، آیا آنها هستند. جایگزین شود و به روز شود. برای مشاهده برنامه، من می دانم که بسیاری از شما ممکن است از فریم ورک های مختلفی مانند Angular مانند React استفاده کنید. این در واقع تغییر زیادی نخواهد کرد. ما روی قسمت view تمرکز نمی کنیم، ما به شدت روی مفاهیم مرتبط با احراز هویت و مدیریت جلسه تمرکز خواهیم کرد. هنگامی که برنامه را به صورت محلی دانلود می کنیم، اولین کاری که باید انجام دهیم، البته npm-install است. خوشبختانه، من قبلاً این کار را انجام داده ام. مثل همیشه، در این ویدیو سه دقیقه منتظر بودیم و اکنون باید سرویس npm را اجرا کنیم تا برنامه را بسازد و آن را به صورت محلی ارائه کند. خیلی سریع است، به این دلیل که من مانند همیشه حافظه پنهان برنامه را داخلی داشتم، زمان زیادی را صرف کرد. ما یک برنامه کوچک داریم که دارای صفحه ورود است. ویدیو را با شروع :1:44 پخش کنید و رونوشت را دنبال کنید

### 1:44
اگر اولین صفحه ورود و یک صفحه ورود دیگر را بازخوانی کنم، قبلاً دو صفحه ورود دارم و این در واقع گیج کننده است زیرا ما دو مسیر کد متفاوت داریم حتی اگر از یک مؤلفه استفاده کنیم.

### 2:03
بیایید روی "ورود" کلیک کنیم. اولین چیزی که می توانیم متوجه شویم این است که در واقع به من پیشنهاد داده است که رمز عبور را به مدیر رمز عبور خود اضافه کنم. من آن را به سرعت رد کردم و نباید می کردم، اما در واقع بسیار جالب است. این بدان معناست که فرم به درستی طراحی شده است تا مدیر رمز عبور تشخیص دهد که این یک فیلد ورود است. اگر این کار را انجام ندهید، خوب، افرادی را که بهترین شیوه های امنیتی را در زندگی روزمره خود دارند، دور می کند. شما واقعاً می خواهید فرمول شما در برابر مدیران رمز عبور آزمایش شود. ممکن است LastPass باشد، اما موارد دیگری مانند Dashlane وجود دارد. من فکر می کنم در واقع بسیار مهم است که در طرح پرسش و پاسخ خود، شما واقعاً بررسی کنید که مدیران رمز عبور یک فیلد را به درستی تشخیص دهند، تشخیص دهند که یک ورود جدید در یک وب سایت جدید وجود دارد. برای انجام این کار، در واقع، باید در فرمول شما قرار گیرد. وقتی قسمت های ورودی را انجام می دهید، باید مطمئن شوید که فرم شما دارای یک فیلد اکشن است تا در این صورت در دسترس نباشد. بیایید بررسی کنیم که در کنسول بهتر است. باید مطمئن شوید که شرکت اقدامی دارد. در این صورت، اینطور نیست، بنابراین احتمالاً می توان آن را بهتر کرد. سپس می‌خواهید مطمئن شوید که قسمت نام کاربری متن یا ایمیل است. به مدیریت رمز عبور منجر می شود و تکمیل خودکار جادوی خود را انجام می دهد. حتی زمانی که یک حساب کاربری ایجاد می کنید، می خواهید مدیر رمز عبور بتواند رمز عبور قوی را پیشنهاد دهد. سپس فیلدی برای رمز عبور دارید که باید مطمئن شوید که نوع رمز عبور است. نه تنها رمز عبور را از دیده شدن پنهان می کند. بگذار این کار را بکنم. اکنون می بینید که میدان آنطور که باید پنهان نیست، بنابراین این اولین کاری است که انجام می دهید. می‌خواهید مطمئن شوید که مرورگر می‌داند که باید رمز عبور را از صفحه مخفی کند، اما همچنین به مدیر رمز عبور کاربر شما اجازه می‌دهد واقعاً بداند که این یک فیلد رمز عبور است. وقتی در صفحه ثبت نام هستید، متوجه می شود که در صفحه ثبت نام هستید و رمز عبور را پیشنهاد می کند. هنگامی که در صفحه ورود هستید، حساب ها را به کاربر پیشنهاد می کند. می دانم که نادیده گرفته شده است، اما در واقع بسیار مهم است. اگر می‌خواهید از کاربران خود محافظت کنید، می‌خواهید با ابزارهایی که برای محافظت از رمزهای عبور خود استفاده می‌کنند خوب بازی کنید. حالا که وارد شده ایم، اجازه دهید چند مورد را بررسی کنیم. ما کوکی های برنامه را بررسی می کنیم و همانطور که می بینید هیچ کوکی برای این برنامه وجود ندارد. اگر به ذخیره سازی محلی بروم، چیزهای زیادی را می بینم که نباید وجود داشته باشد، اما می بینم که یک توکن کاربر وجود دارد. اجازه دهید فضای ذخیره سازی محلی را پاک کنم. شما داستان را می دانید. وقتی توسعه دهنده وب انجام می دهید، چیزهای زیادی دارید. در اینجا، یک بار دیگر مدیر رمز عبور من در واقع قادر به شناسایی آنهایی بود که در وب سایت بودند. حال بیایید وضعیت برنامه را بررسی کنیم. اگر به ذخیره سازی محلی بروم، می بینم که یک توکن کاربر وجود دارد. اول از همه، ممکن است بسته به جریان احراز هویت شما، تنظیماتی برای قرار دادن آن در ذخیره‌سازی جلسه وجود داشته باشد، زیرا نمی‌خواهید کاربر واقعاً مجبور باشد وب‌سایت را باز کند تا احراز هویت شود. ثانیا این یکی برای من مشکل سازتر است. رمز باید در یک کوکی فقط HTTP باشد. زیرا در مورد XSS، در صورت انواع دیگر حملات، این نباید برای جاوا اسکریپت قابل دسترسی باشد. ممکن است یکی بپرسد، بله، اما در این صورت، چه کسی را می‌دانم که در آن وارد شده باشم؟ من می دانم که این یک راه حل ایده آل از نظر تجربیات معماری توسعه دهنده نیست. اما شما می توانید اطلاعات مربوط به کاربر را در حافظه محلی داشته باشید. یعنی نام کاربری تأیید شده او در فضای ذخیره سازی محلی یا در کوکی های شما که از طریق جاوا اسکریپت در دسترس است. اما خود توکن در حالت ایده آل هرگز نباید با کد جاوا اسکریپت در دسترس باشد

مرورگر، در غیر این صورت، در صورت جعل درخواست بین سایتی یا XSS این است که سایر حملات ما مسیر یادگیری بینش را به تفصیل شرح می دهم،

### 8:15
می توان آن را ربوده و به دامنه دیگری دزدید. همچنین برای سایر پایگاه‌های داده در مرورگر همینطور است، شما نمی‌خواهید توکن کاربر را در آن داشته باشید. حالا بیایید شبکه را باز کنیم و از سیستم خارج شویم. وقتی از سیستم خارج می شویم، می بینیم که دسترسی به شبکه وجود ندارد. وقتی از سیستم خارج می شویم، می بینیم که آنها به تازگی رمز را از حافظه محلی حذف کرده اند. این یک تمرین بسیار بد دیگر است. باید مطمئن شوید که توکن در روال خروج شما باطل شده است. بنابراین باید به سایت سرور بک‌اند بگویید که توکن دیگر معتبر نیست، برای انجام این کار، باید یک درخواست HTTP انجام دهید و سپس نقطه پایانی را از سیستم خارج کنید. ویدیو را از :9:17 پخش کنید و رونوشت را دنبال کنید

### 9:17
احتمالا اگر به روش خروج بروید.

### 9:24
به جای پاکسازی حالت، باید تماسی نیز داشته باشید که به پشتیبان می‌گوید به رمز داده و جلسه فعلی حمله کند. بخش جالب دیگر این است که اگر از کوکی ها استفاده کنید، چرخه زندگی ساده ای خواهید داشت. شما فقط خروج اسلش را فراخوانی می‌کنید و بک‌اند کوکی‌های شما را که دارای وضعیت احراز هویت هستند به‌روزرسانی می‌کند. شما مجبور نیستید چیزی را در اینجا بیشتر واکشی کنید یا وضعیت های موجود در سایت SPA خود را مدیریت کنید. زیرا پس از آن این یک بک‌اند است که با حذف کوکی‌ها، باطل کردن آن‌ها یا مواردی از این قبیل، کوکی‌های اقامتی را مدیریت می‌کند. یکی دیگر از دلایلی که در واقع مهم است که توکن را در کوکی به جای ذخیره‌سازی محلی داشته باشید، این است که زندگی شما را آسان‌تر می‌کند. اگر خوب یادم باشد، اینجا چند تماس وجود دارد. شما فراخوانی API دارید که در واقع روشی است که باید توکن را از جایی دریافت کنید. از آنجایی که برای احراز هویت در یک کوکی وجود ندارد، باید در واقع بتوانید بدانید که نشانه چیست و باید آن را واکشی کرده و کد جاوا اسکریپت خود را به روز کنید. وقتی از یک کوکی استفاده می کنید، مرورگر به طور خودکار کوکی را به درخواست اضافه می کند، و این یک چیز اضافی است که لازم نیست به آن فکر کنید. اگر مجبور نیستید در مورد مدیریت توکن در برنامه جلویی خود فکر کنید زیرا همه اینها کوکی هستند، خوب، این حوزه ای است که در آن تأثیر انجام کارهای بد و عدم موفقیت در انجام امنیت را محدود می کنید. بنابراین، برای ایمنی خود، برای ایمنی وب سایت خود، باید از دامنه های فقط HTTP استفاده کنید، کوکی های مشابه سایت منقضی شده است. این 10 برابر امن تر از هر جایگزینی است. سوال این است که آیا این کوکی می تواند یک JSON Web Token یا JWT باشد؟ اما هرگز توکن JWT را نگویید زیرا به معنای JSON Web Token است و هیچ معنایی ندارد. آیا می تواند JWT باشد؟ خوب، واقعاً مهم نیست. محتوای JWT برای سرور مهم است، اما واقعاً نباید در قسمت جلویی استفاده شود. در این صورت، بهتر است از یک امضای وب JSON استفاده کنید، یک باری با امضای وب JSON که در واقع حاوی چیزهایی است که امضا شده است. از بک‌اند سمت راست می‌آید، اما نمی‌توان از آن برای احراز هویت استفاده کرد. اینجا فقط برای نگه‌داری داده‌هایی است که قابل بررسی هستند، اما در صورت فاش شدن نمی‌توانند واقعاً به سلاح تبدیل شوند. اما این فقط در صورتی است که به آنها نیاز دارید. یکی از مواردی که در این برنامه در واقع به خوبی انجام شده است در قسمت روتر است. قبل از بارگیری هر نما، بررسی می کند که آیا کاربر احراز هویت شده است یا خیر. در یک دنیای عالی، این document.cookie است که شامل کتابخانه‌هایی برای مدیریت کوکی‌های جلویی ما می‌شود. خوب، به دو دلیل مهم است. البته برای تجربه کاربری. شما نمی خواهید مردم بتوانند صفحاتی را ببینند که اجازه دسترسی به آنها داده نشده است، و اگر می خواهید یک UX بسیار خوب انجام دهید، می خواهید آنها را به صفحه اولی که می خواستند پس از ورود به سیستم هدایت کنید. منظورم این است که من می‌خواهم به صفحه A دسترسی داشته باشم، باید وارد شوم، سپس یک نمای ورود دارم، و سپس من را فوراً به صفحه A می‌آورد نه به ریشه وب‌سایت. این کاری است که شما می خواهید انجام دهید. اما همچنین مهم است که اجازه ندهید بخشی از وب‌سایت‌هایتان بدون بررسی احراز هویت در دسترس باشد، زیرا سفرهای عجیب و غریبی برای اسکنرها ایجاد می‌کند و شروع به فعال کردن ارسال هرزنامه‌های پشتیبان شما با یک درخواست تأیید شده می‌کند. اگر ادمین اسلش از کاربر فعلی بخواهد که یک مدیر باشد، اگر اجازه دهید بدون احراز هویت قسمت جلویی به آن دسترسی پیدا کند، تماس‌ها با API ادمین با خرابی‌های احراز هویت همراه می‌شود و این در واقع یک شخص بک‌اند را ایجاد می‌کند، خواه شما باشید. خواه شخص دیگری در تیم شما بسیار بسیار ناراضی باشد. اگر بتوانم این کار را اینجا در مورد احراز هویت جلویی انجام دهم، از کوکی‌ها و به‌عنوان شخص پشتیبان برای تنظیم کوکی‌های مورد نیاز در مورد احراز هویت کاربر استفاده کنید. این منطقه ای را که می توانید در آن شکست بخورید کاهش می دهد و بنابراین خطرات امنیتی برنامه های شما را کاهش می دهد. خیلی ممنون برای تماشای این ویدیو امیدوارم از آن لذت برده باشید و به زودی دوباره با هم ملاقات کنیم. برای کسانی که در تعجب هستند، من هنوز یک کوکی روی میز خود دارم. شما می دانید که من واقعاً عاشق کوکی ها هستم. خدا حافظ. روز خوبی داشته باشی.
