## کوکی ها در عمق
### 0:00
سلام، و به برنامه نویسی جاوا اسکریپت با ولادیمیر دی ترکهایم خوش آمدید. همانطور که می دانید موضوع ویدیوی امروز در مورد کوکی ها است. اول از همه می خواهم بابت این شوخی وحشتناک عذرخواهی کنم. من یک کلوچه روی میزم داشتم و می خواستم آن را نشان دهم. بیایید در مورد کوکی ها صحبت کنیم. کوکی ها بخش بسیار مهمی از وب هستند. این راه اصلی برای احراز هویت کاربر شما، چه با دانستن هویت است. شما می توانید مجوز یا احراز هویت را بر اساس کوکی ها انجام دهید. شما می توانید کل کاربر خود را بر اساس کوکی ها شناسایی کنید. اما همچنین، این به طور گسترده برای ردیابی و نظارت بر کاربران استفاده می شود که چه افرادی از دلایل بازاریابی خارج هستند. این در عین حال یک ابزار بسیار مهم از نظر مدیریت احراز هویت و امنیت است، اما همچنین یک ابزار بسیار مهم از نظر ردیابی افراد و حفظ حریم خصوصی است. آنها همه جا هستند. در واقع بسیار منصفانه است که بگوییم حتی مردم هرگز در زندگی خود هیچ خط کدی را در مورد کوکی ها ننوشتند، زیرا آنها مانند بنرهای خسته کننده ای هستند که هنگام خروج از اتحادیه اروپا می آیند. اما من نمی خواهم فعلاً پایان ویدیو را اسپویل کنم. بیسکویت ها. بیایید با یک تعریف ساده برویم. در حال حاضر، من دو سرور اکسپرس JS دارم. خوب، یک کوکی فقط چیزی در هدر است. شما اول از همه، هدر درخواست اول را دارید. بگذار دوباره شروع کنم. شما یک درخواست HTTP دارید و اگر در پاسخ شما هدری به نام Set-Cookie با مقداری در سمت راست وجود داشته باشد، مرورگر آن را ذخیره خواهد کرد. هر بار که یک درخواست جدید به آن وب سرور می دهد، در واقع آن را در یک هدر به نام کوکی قرار می دهد. بیایید با این مثال اول شروع کنیم. من اولین سرور را روی پورت 3000 اجرا می کنم. وقتی درخواستی دریافت می کنید، در واقع نام سرور کوکی، سرور 1 را تنظیم می کند. بیایید به آنجا برویم.

### 2:45
در واقع این یک صفحه وب است که کد آن برای نمایش کوکی ها است، اما کمی بعداً این را خواهیم گفت. اگر به کنسول اشکال‌زدایی خود بروم و کوکی‌ها را نشان دهم، می‌بینم که یک کوکی به نام سرور وجود دارد، که دقیقاً همان چیزی است که ما در کد پشتیبان تنظیم کرده‌ایم. این سرور مقدار 1 را دارد. یک بار دیگر، پس این همان چیزی است که ما در کد تنظیم کردیم. از نظر دامنه 127.0.0.1، چون یک URL است که من از آن استفاده کرده ام، مسیر دارد، انقضا دارد، اندازه دارد. اکنون چند زمینه متنوع دارید که بعداً خواهیم دید. حالا بیایید یک درخواست HTTP انجام دهیم. ما واقعاً به محتوای آن اهمیت نمی دهیم. ما می خواهیم فقط یک درخواست را در همان سرور، در نقطه پایانی چاپ انجام دهیم. در اینجا یک نقطه پایان چاپ است. کاری که انجام می دهد، درخواست های دریافتی را می پذیرد، اما console.logs سرصفحه های درخواست هستند. آنچه در این کنسول در اینجا داریم سرصفحه های درخواست است. می بینیم که سرآیند داریم که یک کوکی با نام دارد و مقدار آن نام سرور برابر با سرور 1 است. ما کد جاوا اسکریپت بیشتری در صفحه وب نداریم. وقتی تماس واکشی خود را انجام دادیم، چیز پیچیده ای در کنسول ننوشتیم. این فقط رفتار پیش فرض مرورگر وب برای پخش کوکی هایی است که در حافظه دارد. اکنون، بیایید نحوه دسترسی به کوکی ها از جاوا اسکریپت را بررسی کنیم. خوب، این بسیار آسان است. شما می توانید document.cookie را انجام دهید و به رشته ای با مقدار کوکی ها خواهید رسید. فرض کنید وب سرور من یک کوکی دیگر دارد.

### 5:09
بیایید آن را دوباره راه اندازی کنیم. صفحه را دوباره بارگیری کنید. اگر document.cookie را انجام دهم، می بینم که در اینجا دو مقدار دارم، که بسیار جالب است. اما چون من برای احراز هویت استفاده کردم، چند نکته وجود دارد که باید در نظر گرفته شود.

### 5:37
اگر ویدیوهای مربوط به احراز هویت تحت مدیریت را به خاطر دارید، ویدیوی قبلی، ما نمی‌خواهیم جلسات برای همیشه اجرا شود یا حداقل می‌خواهیم راهی برای محدود کردن زمان جلسه داشته باشیم. برای انجام این کار، آنها در واقع اولیه هستند که می توانید از آنها استفاده کنید که Expire یا Max-Age هستند. بیایید بگوییم که من می خواهم بیش از من یک مکس داشته باشم. ویدیو را با شروع :6:10 پخش کنید و رونوشت را دنبال کنید

### 6:10
Max-Age، آیا این مورد صحیح است؟ بله، فکر نمی کنم خیلی مهم باشد. فرض کنید می‌خواهیم این کار را تا 20 اکتبر 2021 انجام دهیم. اجازه دهید سریع چیزی را بررسی کنم. تاریخ جدید. بیا یه همچین کاری بکنیم حداقل اگر اشتباه نکنم راحت تر خواهد بود. بیایید سرور را راه اندازی مجدد و بارگذاری مجدد کنیم و اکنون می توانید ببینید که در کوکی دیگر، تاریخ انقضا دارد. زمانی که مدت زمان انقضا را با انقضا یا تاریخ انقضا را با Max-Age تنظیم کنید، در واقع بسیار مهم است. به شما اطلاع دهید که این تاریخ ها، این انقضا، بر اساس زمان سمت سرور نیست، بلکه بر اساس زمان سمت سرویس گیرنده است. اگر مشتریان شما ساعت هایی دارند که جابجا می شوند، اینها در واقع تاثیر خواهند داشت. حالا بیایید در مورد محدوده یک کوکی صحبت کنیم. یک کوکی به طور پیش فرض در همان دامنه و یک مسیر قدیمی موجود است. اما شما می توانید، اجازه دهید سرور دوم را راه اندازی کنم. ویدیو را با شروع :7:49 پخش کنید و رونوشت را دنبال کنید

### 7:49
ما سرور دوم را راه اندازی کردیم و اگر کوکی ها را بررسی کنیم، می بینیم که این سرور روی لوکال هاست است بنابراین دامنه آن لوکالیزه شده است. زمانی که یک کوکی را تنظیم می‌کنید، می‌توانید تصمیم بگیرید که دامنه آن برای کل جهان باشد، آیا دامنه آن فقط به دامنه‌های فرعی یا فقط برای همان دامنه باشد. مرورگر در واقع می داند و تصمیم می گیرد که چه زمانی یک کوکی را به درستی ارسال کند. همچنین، شما دقیقا
او همان چیزی است که با مسیر. ویدیو را با شروع :8:31 پخش کنید و رونوشت را دنبال کنید

### 8:31
من در مورد دامنه کوکی ها به شما گفتم، من فکر می کنم فقط در مورد HTTP به شما گفتم. نه من این کار را نکردم. همانطور که به شما گفتم می توانید به کوکی ها در جاوا اسکریپت دسترسی داشته باشید. بیایید بگوییم که شما دارای اسکریپت بین سایتی، CSRF، عمدتاً یک اسکریپت بین سایتی هستید، و شخصی می تواند جاوا اسکریپت دلخواه را در وب سایت شما اجرا کند. خوب، شما نمی خواهید آنها بتوانند کوکی را به یک وب سایت شخص ثالث درز کنند. به عنوان مثال، برای انجام یک درخواست HTTP به وب سایت دیگری با کوکی در آن. برای محدود کردن آن، ما فقط HTTP ابتدایی در کوکی ها داریم. به من اجازه می دهد یک کوکی دیگر در اینجا ایجاد کنم و فقط HTTP خواهد بود.

### 9:29
حالا، اگر سرور 1 را ریستارت کنم و بررسی کنیم که کوکی‌ها چیست، می‌بینیم که کوکی فقط HTTP داریم، یعنی فقط HTTP. اگر document.cookie را انجام دهم، خوب، آنجا نیست، نمی توانید آن را ببینید. HTTP کوکی فقط در صورتی برابر است که از کد جاوا اسکریپت در دسترس نباشد. با این حال، اگر یک do fetch اسلش چاپ شود، یک بار دیگر به پاسخ اهمیتی نمی دهیم، می بینیم که به سرور ارسال شده است. زیرا ما از دسترسی مرورگر به این کوکی در جاوا اسکریپت جلوگیری می کنیم. بیایید ببینیم ویژگی های کاربر چیست. یکی از موارد بسیار مهم، ایمن است. چون من در [نامفهوم] هستم، تنظیم آن پیچیده است. اما شما می‌خواهید که همه کوکی‌ها امن باشند، به این معنی که آنها باری نیستند که از طریق HTTP ارسال شوند، فقط HTTPS هستند. این برای جلوگیری از استراق سمع اتصال و سرقت کوکی ها است. در پیش بینی، کوکی ها باید ایمن باشند. یک بار دیگر، فقط باید Secure را در اینجا اضافه کنید و مرورگر می داند که با آن چه کند. SameSite در واقع یک کنوانسیون جدید است. این به طور کامل توسط مرورگر پیاده سازی نشده است، اما بسیار قدرتمند است. دارای سه مقدار بالقوه است. اولی Strict خواهد بود. ویدیو را با شروع :11:27 پخش کنید و رونوشت را دنبال کنید

### 11:27
اجازه دهید این سخت را شروع کنم، به این معنی که فقط برای همان دامنه است که می تواند این مقادیر را در اینجا لغو کند، و کوکی ها هرگز نباید با شخص دیگری به اشتراک گذاشته شوند. مقدار دوم lax به معنای سست خواهد بود. شما می توانید به زیر دامنه دامنه بروید، اما نه در خارج، و هیچ کدام. هیچ یک به این معنی نیست، خوب، اصلاً سیاست سایت مشابهی وجود ندارد. این در واقع خطرناک است زیرا کوکی شما اجازه نشت خواهد داشت. حالا بیایید ببینیم کجا می توانیم کوکی ها را از جاوا اسکریپت بنویسیم. شما در واقع می توانید این کار را به راحتی با انجام کوکی مستند برابر با b انجام دهید. این کوکی ها را لغو نمی کند، فقط یکی را در اینجا اضافه می کند. بیایید سعی کنیم یک کوکی را لغو کنیم. این یک کوکی را لغو می کند. شما در واقع می توانید کوکی ها را فقط با تنظیم یک مقدار برای کوکی مستند اضافه کنید. من می دانم که این بهترین API جاوا اسکریپتی نیست که در جهان دیده ایم، اما اینطوری کار می کند. همچنین، می‌توانید یک کوکی را با انجام یک برابر حذف کنید. حالا، اگر من بروم و آن کوکی را مستند کنم، در آنجا جای شما خالی است و به نوعی حذف شده است، حدس می زنم. به این ترتیب کوکی‌ها را از جاوا اسکریپت دستکاری می‌کنید. حالا بیایید در مورد کوکی زامبی صحبت کنیم. راه های زیادی برای کاربر وجود دارد که در نهایت کوکی ها را لغو کند. یکی از ساده‌ترین آنها این است که واقعاً به آنجا بروید و کوکی‌ها را پاک کنید یا افزونه‌های کوکی‌ها را پاک کنید. آنها ممکن است بخواهند این کار را انجام دهند تا از ردیابی جلوگیری کنند. ممکن است افزونه‌های Chrome یا Firefox داشته باشند که از استفاده از کوکی‌ها برای ردیابی و اهداف بازاریابی جلوگیری می‌کند. من چیزی را توصیه نمی‌کنم، اما هکی وجود دارد که در واقع توسعه‌دهنده را قادر می‌سازد تا کوکی‌ها را از قسمت جلویی مجبور کند. این همان چیزی است که به آن کوکی های زامبی می گویند. فرض کنید یک فضای ذخیره‌سازی محلی می‌گیرد و من فقط مورد را تنظیم می‌کنم، ویدیو را با شروع :14:5 پخش می‌کنم و رونوشت را دنبال می‌کنم.

### 14:05
با عرض پوزش، کوکی من، ویدیو را با شروع :14:13 پخش کنید و رونوشت را دنبال کنید

### 14:13
زامبی برابر است با کوکی ویدیو را از ساعت :14:21 پخش کنید و رونوشت را دنبال کنید

### 14:21
اکنون در فضای ذخیره‌سازی محلی، ویدیو را با شروع :14:27 پخش کنید و رونوشت را دنبال کنید

### 14:27
من یک ورودی برای کوکی خود دارم. این درست است. اما کاری که می‌توانم انجام دهم این است که یک اسکریپت داشته باشم که هر بار که صفحه بارگذاری می‌شود یا هر از گاهی در واقع بازنشانی می‌شود، نمی‌دانم چرا نمی‌توانم آن را کپی کنم. ویدیو را از ساعت :14:59 پخش کنید و رونوشت را دنبال کنید

### 14:59
در واقع کوکی را از حافظه محلی یا پایگاه داده محلی یا ذخیره سازی جلسه بازنشانی کنید. زیرا راه‌های زیادی برای نگه‌داشتن وضعیت در سمت جاوا اسکریپت یک برنامه وجود دارد. خوب، شما می توانید آن کوکی های شیطانی یا کوکی های زامبی را ایجاد کنید که در واقع خلاص شدن از شر آنها غیرممکن خواهد بود. این خیلی بود. قبل از اینکه این ویدیو را به پایان برسانم، باید به شما هشدار دهم که در واقع قوانینی در مورد نحوه استفاده از کوکی ها وجود دارد. به عنوان مثال، اگر وب سایت شما در اتحادیه اروپا در دسترس است، باید GDPR را رعایت کنید. تا زمانی که شما یک شرکت، یک شرکت هستید و می خواهید در اتحادیه اروپا تجارت کنید، و وب سایت شما در اتحادیه اروپا در دسترس است، باید از GDPR پیروی کنید، به این معنی که نمی توانید کوکی هایی داشته باشید که مورد نیاز نیستند. برای اینکه وب سایت بدون توافق صریح کاربر کار کند. معمولاً وقتی می گویید، هی، این وب سایت از کوکی ها برای این منظور استفاده می کند، با بنر همراه می شود، لطفاً تأیید کنید که آنها را می پذیرید. این نباید فقط یک بنر باشد. شما اجازه ندارید شما را تنظیم کنید

کوکی ها را تا زمانی که با آن موافقت کنند. بعد نشان دهید که می دانید قبل از استفاده از کوکی ها یک چارچوب قانونی وجود دارد، آنها در واقع داده های حساس بسیار حساس در اتحادیه اروپا و تا آنجا که من می دانم در ایالت کالیفرنیا نیز هستند. شما همیشه می‌توانید تصمیم بگیرید که با این مناطق تجارت نکنید، اما اگر این کار را از دست بدهید، ممکن است جریمه‌ها بسیار زیاد باشد. من نادیده گرفتن این بخش قانونی را توصیه نمی کنم. خیلی ممنون از تماشای این ویدیوها به زودی ویدیوها را خواهید شناخت، امیدوارم از این کار به خوبی لذت برده باشید و اکنون بتوانید هر آنچه را که در مورد کوکی ها باید بدانید را به هر کسی بگویید. روز خوبی داشته باشید و به زودی شما را می بینم.
