## notes (Node.js refreshers)

### 0:00
[SOUND] Hello and welcome to secure JavaScript programming with Vladimir that your camera in this video, we will do refreshes about node.js. So the first question one may ask is what is node.js? Well node.js is a JavaScript and time built on chrome V8 JavaScript engine. It doesn't have any html rendering capabilities. It is just a criminal line program that runs on your desktop. You can download it from node.js.org for your own version for your own operating system. But I usually recommend using an installer such as NVN for LTS and make us you have the documentation that is available online but we will check that a bit later. So node.js how does it works? Well, it's a JavaScript and time. So you just have the js files like hello world from node.js and you can run them directly.
Play video starting at :1:22 and follow transcript
### 1:22
The main difference with raw JavaScript and the way brother, is that no js provide certain AIPs those APIs gives you access to certain features such as access to the five system or cryptographic libraries or network access. So how can you import for instance the five system API to log the current code base? Well, you get the five system API through a method name require that is used to import libraries or modules in JavaScript in node.js. So if we want to get the contents of a file we've been called fs.readfile and then we will put the path to this file. So since we are in node.js I can use underscore underscore phylum which is the path to the current file. Now something weird is happening.
Play video starting at :2:40 and follow transcript
### 2:40
Let's create data. I pass a function as the second argument. Node.js is a section for first rent time, meaning that most of the library's most of what you do with node.js is a synchronous. There are multiple ways of handling a synchronous flows in JavaScript. One of them is for instance the promises. But so when we will use right now is the callback function meaning that we pass a function as an argument to the method and when the value we want is available, in that case the content of the current file as a text, it will be available as a function argument. My convention in java in node.js the first argument of a callback function is usually the error. So let's say if error console.error era and then else console.log [SOUND]. Data and data is in the format of a buffer which is a native JavaScript. Node.js object that you want to take a look at in depth if you're interested in. So we have to call to string to get a string. So let's run this code. We get actually the content of the file because there was no error. But now let's try to access a file that does not exist. Then we re run this code and we get an error that is logged at this line of code. No such file or directory. That's one of the main difference between node.js and browser. Node.js being a several side runtime, it has access to the file system, it has access to a lot of other APIs. So I was talking about buffers prefer our global object that I used to represent a sequence of bytes that can be converted to strings, but you can also check the documentation or the five system API that is here. Fs that's what I used the world documentation on who to read. Right open d let create files or directory is available here. It's available in a synchronous and asynchronous matter. It's really important to understand that node.js has a single threat, which means that if I read two files in a row. [SOUND] So let's say I want to do council like file when done and then I will read something else like directory [SOUND] read, deal? So I need to put your name, [SOUND] Dear Wendy. No, those are executed in the same thread. And as you can see even if the call to read the app is sent after the call to read file. It's callback function is called first that because all of that happens with a single thread and even troop. As are much more detailed videos about who know js works even an in for set skills. But this concept is extremely important because no js can only do one single thing at a time. So let's see if I put a loop here. So I will say four, let y equal zero y 1 6 which is one with 60 behind press press I do nothing. And if I run this code, it actually takes a bit of time before fulfilling the others. Let's try with another value. Okay. To this, [SOUND] It will actually run all these calls before accessing the fight. So now seven is a bit high. What's important to understand is that no, GS can only run one thing at the time. So this synchronize block of code prevent these are synchronous blocks of code from running those callback function from being called, meaning that when you have a server running note. Yes. Well, if you've got a piece of code that is synchronous, it will prevent the execution of the rest of the code. And the js has been designed for high throughput web servers with a lot of fast synchronous cold. That leads us to the first rule of node.js has never block the event loop. So what are the other? APIs accessible node.js? Well, we've got a very fancy one that is the http API the http API enabled to do two different kinds of things. It enables to create servers.
Play video starting at :8:37 and follow transcript
### 8:37
When you create a server, you pass a callback function that will be called. Each time there is an http request and it takes two arguments, request and response. And if we want to just send okay, we do it that way.
Play video starting at :8:57 and follow transcript
### 8:57
And now each time there is an incoming http request we will respond with. Okay, then, since it is a web server we need to listen on a port. So let's listen on 8 8, 80 80.
Play video starting at :9:13 and follow transcript
### 9:13
No we've got a running web server. Let's just put a process that next week which is a simple as introduce operation to make sure that our server has started and now we will do something else with the http core library. We will do a get call. That means that we are also able to do http request through this library. So we will do http local host [SOUND] 80 80.
Play video starting at :9:47 and follow transcript
### 9:47
And now we will pass a callback function with a response.
Play video starting at :9:54 and follow transcript
### 9:54
We will just log response on data because response is a stream.
Play video starting at :10:5 and follow transcript
### 10:05
So it comes as synchronously with this callback being called multiple time.
Play video starting at :10:13 and follow transcript
### 10:13
Once again it might be a buffer. So let's run this. Okay. That's probably because I wrote localhist instead of lookatus now. It should work. Okay. What happened here is that we started to sever that respond with? Okay. A new line for each request and we sent an http request directly from the same threat to the server. So it's called the port 80 80 glad they are responding. And as synchronously displayed it. What are the other libraries node.js co? Well, one of my favorite is named crepe crypto and it has nothing to do with bitcode. Crypto basically contains what you need to do for cryptography. So the ssl handling in no Js is involved through it. But also since note 15 it has a random in method. So for instance if I want a safe random number, this one will be cryptographically strong and like using math a trend. In JavaScript I can call the crypto library and this is something linked with node.js. This won't be able available in the browser. So in the brother, if you want random number, you might still have to use math to trend. But those random numbers won't be safe in a crypto technically way. Sorry for this world. What are the over APIs that are also available for? No gs? Well, the OS API gives you gives you knowledge of the current operating system. If it's for instance, Windows or Mac. Os or Linux X. So it's really is version or even the CPU architecture of the network interfaces. Everything is node.js is available for you to build web servers. As you would do in java. For instance, if you don't want to do http, you've got the net.co module that gives you a TCP library is everything you need to build TCP server and clients. You also have access to the V8 module that exposes some capabilities of the V8 runtime. V8 is a piece of code, is open source piece of code designed by google that trans JavaScript in node.js and google chrome. So for instance, you can use it to get a hip snap shirt which is the state of the memory at one point or to just know how much memory has been used. Node.js provides feature of a web assembly, including the WebAssembly system interface that enables you to learn WebAssembly and gives system access to your web assembly bundle in a sandbox. So I told you that node.js actually single threaded that somehow true and not true like in bruises there is a walker, API that can be used to create new threats and communicate with them. You can paralyze synchronous task such as creating an object from serialized object in jay's own or xml and gain performance boost from the also since some system Cisco's you might want to do, might not be able to, might not be available directly. Node.js you might want to create your own Adams so you can embed CC prospers rest or any machine code in node.js there are some API is for that. For instance if we check the very popular sqlite3 NPM module node.js, this is bindings from C code to JavaScript. So let's check it. Source code of this module. It is in 15% return in C plus place and they are called that are called bindings that actually used to expose functions to node.js. So for instance when you use, create function creates a sink work. It creates a co java echo a synchronous task in Cyprus place and you have JavaScript code that is exposed in JavaScript that you can use. For instance, if we check its documentation, we can call new database and call things on this database like sequel queries, but that directly through JavaScript functions that actually call C code and other hood. And it's not unlike the core libraries of node.js that actually call these calls when you call Fs that open [SOUND] On something and fine. It's actually called the core unique open task. So let's check it. If I do man, open, I've got the definition of the open siskel in unique. Well that's exactly what happens in node.js when you're running on Micros liners. The main difference is that node.js is the same system. API for all supported operating systems, including Solaris and Windows. Well, this is it for the node.js refreshers. I hope you enjoyed them. This will be critically needed for the rest of this course, so thanks a lot for watching them. And I hope you enjoy this video, see you soon in another course.
